# network-study
네트워크 공부
1. 네트워크 세상에 들어서며
   1. 네트워킹
      1. 서로 연결하는 것
2. 네트워크와 케이블, 그리고 친구들
   1. 이더넷(Ethernet)
      1. 네트워킹의 한 방식
      2. ``CSMA/CD`` 프로토콜을 사용하여 통신을 한다.
         1. Carrier Sense Multiple Access/Collision Detection 
         2. 두 PC가 한 PC로 동시에 통신을 시도했을 때, 충돌이 나는 것을 ``콜리전``이라고 하며, ``CSMA/CD``방식은 아무도 통신을 하고 있지 않알 때, 무조건 자기 데이터를 실어서 보낸 후 잘 갔는지 확인해보는 방식이다.
   2. 토큰링(TokenRing)
      1. 한 네트워크에 토큰이 하나인데, 그 토큰을 가진 PC만 통신을 할 수 있는 방식
   3. 맥 어드레스(MAC Address)
      1. 실제 통신은 IP주소를 다시 MAC(Media Access Control)으로 바꾸는 과정이며 이 과정을 ``ARP(Address Resolution Protocol)``라고 한다.
      2. 맥주소는 고유하다.
   4. 캐스트
      1. 유니캐스트
         1. 네트워크에서 가장 많이 사용되는 통신 방식
         2. 특정 목적지의 주소 하나만을 가지고 통신하는 방식
         3. 자신의 맥 어드레스가 아니라고 판단되면 랜카드가 해당 프레임을 버리기 때문에 그 목적지 주소가 아닌 다른 PC들의 CPU성능을 저하시키지 않는다.
      2. 브로드캐스트
         1. 라우터 밑에 달린 로컬 랜에 붙어있는 모든 장비들에게 통신을 보낸다.
         2. 받기 싫어도 무조건 받기 때문에 CPU성능이 저하된다.
      3. 멀티캐스트
         1. 특정 그룹의 다수에게 통신을 보낼 수 있다.
         2. 스위치나 라우터가 멀티캐스트 기능을 지원해야 가능(일반적으로 라우터는 브로드캐스트를 막아버림)
   5. OSI 7 Layer
      1. ``애-프-스-트-엔-들-피``
      2. 왜 쓸까?
         1. 데이터 흐름이 한 눈에 보인다.
         2. 문제를 해결하기 편리하다.
         3. 표준화를 위함
      3. 문제
         1. 데이터 케이블이나 허브 등은 무슨 계층?
            1. Physical Layer
         2. 스위치나 브리지
            1. Data Link Layer
         3. 라우터
            1. Network Layer
      4. 각 레이어별 설명
         1. Physical Layer
            1. 전기적, 기계적, 기능적인 특성을 이용해서 통신 케이블로 데이터를 전송
            2. 통신 단위는 ``비트``이며, 이것은 1과 0으로 나타나는, 즉 전기적으로 On, Off상태이다.
            3. 통신 케이블, 리피터, 허브 등
         2. Data Link Layer
            1. 피지컬 레이어를 통하여 송수신되는 정보의 오류와 흐름을 관리하여 정보 전달을 수행할 수 있도록 도와준다.
            2. 맥 어드레스를 갖고 통신할 수 있게 해준다.
            3. 통신 단위는 ``프레임``
            4. 브리지, 스위치 등
         3. Network Layer
            1. ``라우팅``의 역할
            2. 라우터
         4. Transport Layer
            1. 플로 컨트롤과 에러 복구 기능
               1. 에러 복구를 위해 패킷을 재전송하거나 프롤를 조절하여 데이터가 정상적으로 전달될 수 있도록 한다.
            2. TCP, UDP
         5. 데이터를 위의 단계를 거쳐 ``헤더``라는 정보가 추가되며 포장된다. ``헤더``는 전송을 위해 필요한 정보이며 네트워크 계층의 ``헤더``에는 IP 주소가 붙어 있다.
3. TCP/IP와의 만남
4. 네트워크 장비에 관한 이야기
   1. 랜카드(NIC: Network Interface Card)
      1. 자신에게 온 데이터인지 확인해주는 장치(들어온 프레임의 목적지 맥 어드레스를 보고 자기 것이 아니면 버린다. 자신의 것이면 ``CPU``에 ``인터럽트``를 걸어서 데이터를 처리해 줄 것을 요청한다.)
   2. PC의 버스 방식
      1. 예전에는 ISA
      2. 현재는 PCI
   3. 장치관리자에서 네트워크 어댑터의 정보에서 리소스탭을 보면 ``IRQ``와 ``Base Memory``가 있다. ``IRQ``는 데이터가 들어왔을 때 CPU에 인터럽트 리퀘스트를 보내고 미리 정해놓은 ``Base Memory``로 이동해서 작업을 시작한다.
   4. 허브
      1. 같은 허브에 있는 PC들은 ``콜리전 도메인``에 있다라고 말한다.
         1. 하나의 콜리전 도메인에 있기 때문에, 어느 한순간에는 한 PC만 데이터를 보낼 수 있고, 이러한 기능을 수행하는 허브를 ``Shared 허브``라고 부른다. 즉, 10Mbps의 속도를 그 허브에 연결된 모든 PC들이 공유한다. 그러므로 허브 한 대만으로 모든 PC들을 연결하는 것은 한계가 있다.
         2. 이러한 콜리전 도메인을 나눠주는 역할을 하는 장비가 ``스위치``이다.
   5. 스위치
      1. 허브와의 가장 큰 차이점은 1번과 2번 PC에서 통신이 일어날 때 나머지 PC들도 동시에 통신이 가능하다는 것이다. 그 이유는 스위치가 콜리전 도메인을 나눠주기 때문이다.
      2. 무조건 스위치가 좋은 것은 아니다. 적은 트래픽이 발생하는 네트워크에서는 허브가 적절하다. 
      3. 또한, 스위치나 허브나 서버하나만을 바라보고 있다면, 두 장비의 속도차이는 나지 않는다. 어차피 서버가 한 대밖에 없기 때문에 한 서버와의 통신이 가능하기 때문이다.
   6. 브리지/스위치의 기능
      1. Learning. 배운다.
         1. 출발지의 맥 어드레스를 외운 후 이것을 브리지 테이블이란 곳에 저장한다.
      2. Flooding. 모르면 들어온 포트를 제외한 다른 모든 포트로 뿌린다.
         1. 들어온 프레임을 어디로 보내야 할지 모를 때 나머지 포트로 다 뿌린다.
      3. Forwarding. 해당 포트로 건네준다.
      4. Filtering. 다른 포트로는 못 건너가게 막는다.
         1. 목적지와 출발지가 같은 경우 못 건너게 막는다.(``Filtering``)
         2. 목적지와 출발지가 다른 경우 지나가게 해준다.(``Forwarding``)
         3. 콜리전 도메인을 나눠주는 기능 제공
      5. Aging. 나이를 먹는다. 
         1. 브리지 테이블의 기억 시간은 디폴트로 ``5분``, 즉 ``300초``이다.
         2. 브리지 테이블에 기록된 프레임이 더이상 들어오지 않으면 삭제하고, 들어온다면 타이머를 리셋한다.(Refresh)
   7. 브리지와 스위치의 차이
      1. 스위치는 하드웨어적으로 처리방식이 이루어지고 브리지는 소프트웨어적으로 이뤄진다. 로직을 미리 칩에 구워하는 ASIC(에이직)방식이므로 처리속도가 더 빠르다.
      2. 프레임을 처리하는 방식
         1. 스위치
            1. Cut-through
               1. 걍 바로 보냄
            2. Store-and-forwarding
               1. 프레임 받고 처리를 시작하는 방식
         2. 브리지
            1. Store-and-forwarding
   8. Looping(뺑뺑이)
      1. 브리지나 스위치에서 자주 발생하는 현상
      2. 호스트와 연결된 스위치 두개가 있다고 가정하자. 호스트에서 브로드캐스트를 쏠 경우 스위치A에서는 Flooding을 하게 되고, 스위치B에서도 Flooding을 하게 된다. 그럼 위의 과정이 무한히 반복된다.
      3. 스패닝 트리 알고리즘(Spanning Tree Algorithm)
         1. Looping을 막기 위한 알고리즘
         2. 두 스위치간에 오가는 경로를 하나로 설정해주는 알고리즘
         3. 하나만 활성화하고 장애가 발생할 경우 다른 하나를 활성화시켜준다.
   9. 라우팅이냐, 스위칭이냐
      1. 스위치로는 풀 수 없는 한계가 있어 라우팅을 사용해야 한다.
         1.  브로드캐스트
             1.  전 세계에서 브로드캐스트를 날렸다 했을 때 목적지의 맥 주소를 찾기 위해 ARP를 사용하는데, 이러면 PC사용이 아예 불가능할 것이다.
             2.  이럴 때 콜리전도메인을 나눠주기 위한 것이 라우터다.
         2.  패킷 필터링
             1.  네트워크 주소에 따라서 전송을 막았다 풀었다하는 보안적 기능
         3.  로드 분배
             1.  한쪽 경로에 문제가 생겨도 다른 쪽 경로를 통해 갈 수 있게 해준다.
         4.  QoS(Quality of Service)
             1.  상황에 따라 트래픽 전송의 순서를 조정해주는 기능
5. IP주소로의 여행
   1. 어떤 네트워크에서든지 ``하나의 네트워크``에서는 네트워크 부분은 모두 같아야 되고, 호스트 부분은 달라야 한다.
   2. IP주소는 각 클래스로 구분되며 IP배정을 계획할 때는 최대 가능 호스트 수를 생각해서 클래스를 정한다.
      1. 예를 들어 300개의 호스트가 있다면 클래스 C하나를 배정하면 안된다.(클래스C는 최대 가능 호스트 수가 254개다.)
   3. 서브넷 마스크
      1. IP주소의 어디 까지가 ``네트워크`` 부분이고 어디까지가 ``호스트`` 부분인지를 나타내 준다.
      2. **서브넷 마스크가 이진수로 ``1``인 부분이 네트워크가 되고 ``0``인 부분이 호스트가 된다는 것**
      3. 위에 IP주소를 적고, 아래에 서브넷 마스크를 적은 후 이 둘을 ``논리적 AND``를 하면 아래에 나온 답이 ``서브넷``이 된다.
      4. 서브넷 마스크로 만들어진 네트워크, 즉 서브넷은 하나의 네트워크이기 때문에 서로 나뉜 서브넷끼리는 라우터를 통해서만 통신이 가능하다.
         1. ``150.100.0.0``의 네트워크에서 서브넷 마스크가 ``255.255.0.0``이면 ``150.100.100.1``과 ``150.100.200.1``은 라우터가 없이 통신이 가능하다.
         2. ``150.100.0.0``의 네트워크에서 서브넷 마스크가 ``255.255.255.0``이면 ``150.100.100.1``과 ``150.100.200.1``은 라우터를 통해 통신이 가능하다.
      5. 서브넷 마스크의 성질은 이진수로 썼을 때 ``1``이 연속적으로 나와야 한다.(``1``사이에 ``0``이 있어서도 안된다.)
6. 스위치와 브리지
   1. 스패닝 트리 프로토콜을 이해하기 위해 알아야 하는 2가지 개념
      1. Bridge ID
      2. Path Cost
         1. 한 스위치에서 다른 스위치로 가는데 드는 비용
   2. 스패닝 트리 프로토콜을 이해하기 위해 기본적인 동작 3가지만 알면 된다.
      1. 네트워크당 하나의 루트 브리지(Root Bridge)를 갖는다.
      2. 루트 브리지가 아닌 나머지 모든 브리지(Non Root Bridge)는 무조건 하나씩의 루트 포트를 갖는다.
      3. 세그먼트(브리지간에 연결된 링크라고 보면됨)당 하나씩의 데지그네이티드 포트(Designated Port, 지정포트)를 갖는다.